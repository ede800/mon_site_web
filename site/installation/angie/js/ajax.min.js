/*
 Copyright (c)2009-2022 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
function akeebaAjaxConnector(l){this.url=l;this.error_callback=this.dummy_error_handler;this.call=function(e,h,b,c,f,k){null==c&&(c=!1);null==k&&(k=!1);null==f&&(f=k?6E5:1E4);c||(c=(new Date).getTime()/1E3,f=parseInt(c,10),e._dontcachethis=Math.round(1E3*(c-f))/1E3);null==this.url&&(this.url="index.php");$.ajax({type:"POST",url:this.url,cache:!1,data:e,timeout:6E5,success:function(a){if(k){var g=a.indexOf("###");if(-1==g){a="Invalid response: "+a;null==b?null!=this.error_callback&&this.error_callback(a):
b(a);return}0!=g&&(a.substr(0,g),a=a.substr(g));a=a.substr(3);g=a.lastIndexOf("###");a=a.substr(0,g);try{var d=JSON.parse(a)}catch(m){a=m.message+"\n<br/>\n<pre>\n"+a+"\n</pre>";null==b?null!=this.error_callback&&this.error_callback(a):b(a);return}}else d=a;h(d)},error:function(a,g,d){d="<strong>HTTP Request Error</strong><br/>HTTP Status: "+a.status+" ("+a.statusText+")<br/>";d=d+"Internal status: "+g+"<br/>XHR ReadyState: "+a.readyState+"<br/>";d=d+"Raw server response:<br/>"+a.responseText;null==
b?null!=this.error_callback&&this.error_callback(d):b(d)}})};this.callJSON=function(e,h,b,c,f){this.call(e,h,b,c,f,!0)};this.callRaw=function(e,h,b,c,f){this.call(e,h,b,c,f,!1)};this.dummy_error_handler=function(e){alert("An error has occured\n"+e)}};
